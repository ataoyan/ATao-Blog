---
import BaseLayout from '../layouts/BaseLayout.astro';
import Navbar from '../components/Navbar';
import Footer from '../components/Footer';
import FriendsList from '../components/FriendsList';
import DisconnectedFriendsList from '../components/DisconnectedFriendsList';
import SiteInfo from '../components/SiteInfo';
import Comment from '../components/Comment';
import ParticlesBackground from '../components/ParticlesBackground';
import ErrorBoundary from '../components/ErrorBoundary';
import { FRIEND_LINKS } from '../friends';
import { BLOG_NAME, FRIEND_LINK_CONTACT } from '../config';
---

<BaseLayout title={`友情链接 | ${BLOG_NAME}`}>
  <div class="min-h-screen relative flex flex-col">
    <ParticlesBackground client:idle />
    
    <Navbar 
      client:load
      currentPath="/link"
      searchQuery=""
      setSearchQuery={() => {}}
    />

    <main class="flex-1 flex flex-col relative w-full max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 sm:pt-24 z-10">
      <div class="animate-in fade-in slide-in-from-bottom-8 duration-500">
        <!-- Header -->
        <div class="text-center mb-16">
          <h1 class="text-3xl sm:text-4xl font-bold text-slate-900 dark:text-white font-serif mb-4">友情链接</h1>
          <p class="text-lg text-slate-600 dark:text-slate-400 font-serif italic">
            探索更多优秀的内容创作者和技术伙伴。
          </p>
        </div>

        <!-- Friends List with Pagination -->
        <FriendsList client:idle links={FRIEND_LINKS} />

        <!-- Disconnected Friends List -->
        <DisconnectedFriendsList client:idle links={FRIEND_LINKS} />

        <!-- Apply Section - Redesigned -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-12">
          <!-- 申请友链 -->
          <div class="rounded-2xl bg-slate-50 dark:bg-white/5 border border-slate-100 dark:border-white/5 p-6">
            <div class="flex items-center gap-2 mb-4">
              <svg class="w-5 h-5 text-docs-accent dark:text-dark-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
              </svg>
              <h3 class="text-lg font-bold text-slate-900 dark:text-white">申请友链</h3>
            </div>
            <p class="text-sm text-slate-600 dark:text-slate-400 mb-4">
              欢迎技术与生活类博客交换友链
            </p>
            <p class="text-sm text-slate-600 dark:text-slate-400 mb-4">
              评论区留言或请发送邮件至 <a href={`mailto:${FRIEND_LINK_CONTACT.email}`} class="text-docs-accent dark:text-dark-accent hover:underline">{FRIEND_LINK_CONTACT.email}</a>
            </p>
            <!-- 提示信息框 -->
            <div class="rounded-lg border-2 border-dashed border-docs-accent/30 dark:border-dark-accent/30 bg-docs-accent/5 dark:bg-dark-accent/10 p-4 text-center">
              <p class="text-sm text-docs-accent dark:text-dark-accent font-medium mb-1">
                博客名称、描述、地址、头像等信息
              </p>
              <p class="text-xs text-slate-500 dark:text-slate-400">
                任意格式均可,包含基本信息即可
              </p>
            </div>
          </div>

          <!-- 本站信息 -->
          <SiteInfo 
            client:load 
            name={FRIEND_LINK_CONTACT.name}
            url={FRIEND_LINK_CONTACT.url}
            description={FRIEND_LINK_CONTACT.description}
            avatar={FRIEND_LINK_CONTACT.avatar}
          />
        </div>

        <!-- Comment Section -->
        <Comment client:idle />
      </div>

      <Footer client:idle />
    </main>
  </div>

</BaseLayout>
